<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Party Voting App</title>
    <style>
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Party Voting App</h1>

    <button id="toggleTableButton">Show Party Status</button>

    <table id="partyTable" class="hidden" border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Vote Count</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="party : ${partydata}">
                <td th:text="${party.id}"></td>
                <td th:text="${party.name}"></td>
                <td th:text="${party.voteCount}"></td>
            </tr>
        </tbody>
    </table>

    <form action="/com/vote" method="post">
        <label>Select Party to Vote:</label>
        <div th:each="party : ${partydata}">
            <input type="radio" id="party${party.id}" name="partyId" th:value="${party.id}">
            <label th:for="'party' + ${party.id}" th:text="${party.name}"></label><br>
        </div>
        <button type="submit">Vote</button>
    </form>

    <script>
        const toggleTableButton = document.getElementById('toggleTableButton');
        const partyTable = document.getElementById('partyTable');
      
        toggleTableButton.addEventListener('click', function() {
            if (partyTable.classList.contains('hidden')) {
                const password = prompt('Enter the authorization password:');
                if (password === '1581') { 
                    partyTable.classList.remove('hidden');
                    toggleTableButton.innerText = 'Hide Party Table';
                } else {
                    alert('Not authorized. Incorrect password.');
                }
            } else {
                partyTable.classList.add('hidden');
                toggleTableButton.innerText = 'Show Party Status';
            }
        });

    </script>
</body>
</html>
